{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/abdulaliyev/tut/nextjs-graphql/online-store/frontend/components/Signup.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation SIGNUP_MUTATION(\\n    $name: String!\\n    $email: String!\\n    $password: String!\\n  ) {\\n    signup(name: $name, email: $email, password: $password) {\\n      email\\n      name\\n      id\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport { gql } from 'apollo-boost';\nimport Form from './styles/Form';\nimport Error from './ErrorMessage';\nimport { CURRENT_USER_QUERY } from '../lib/queries';\nexport var SIGNUP_MUTATION = gql(_templateObject());\n\nvar Signup = function Signup() {\n  var _useState = useState({\n    name: '',\n    email: '',\n    password: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      inputs = _useState2[0],\n      setInputs = _useState2[1];\n\n  var _useMutation = useMutation(SIGNUP_MUTATION, {\n    variables: inputs,\n    refetchQueries: [{\n      query: CURRENT_USER_QUERY\n    }]\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      signup = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      error = _useMutation2$.error,\n      loading = _useMutation2$.loading;\n\n  var handleFormField = function handleFormField(_ref) {\n    var target = _ref.target;\n    setInputs(_objectSpread({}, inputs, _defineProperty({}, target.name, target.value)));\n  };\n\n  return React.createElement(Form, {\n    method: \"post\",\n    onSubmit:\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _context.next = 3;\n                return signup();\n\n              case 3:\n                res = _context.sent;\n                console.log(res);\n                setInputs(_objectSpread({}, inputs, {\n                  name: '',\n                  email: '',\n                  password: ''\n                }));\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(\"fieldset\", {\n    disabled: loading,\n    \"aria-busy\": loading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"Sign Up for An Account\"), React.createElement(Error, {\n    error: error,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"Email\", React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"Email\",\n    value: inputs.email,\n    onChange: handleFormField,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  })), React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Name\", React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    placeholder: \"Name\",\n    value: inputs.name,\n    onChange: handleFormField,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  })), React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"Password\", React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    value: inputs.password,\n    onChange: handleFormField,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Sign Up!\")));\n};\n\nexport default Signup;","map":{"version":3,"sources":["/Users/abdulaliyev/tut/nextjs-graphql/online-store/frontend/components/Signup.js"],"names":["React","useState","useMutation","gql","Form","Error","CURRENT_USER_QUERY","SIGNUP_MUTATION","Signup","name","email","password","inputs","setInputs","variables","refetchQueries","query","signup","error","loading","handleFormField","target","value","e","preventDefault","res","console","log"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport { gql } from 'apollo-boost';\nimport Form from './styles/Form';\nimport Error from './ErrorMessage';\nimport { CURRENT_USER_QUERY } from '../lib/queries';\n\nexport const SIGNUP_MUTATION = gql`\n  mutation SIGNUP_MUTATION(\n    $name: String!\n    $email: String!\n    $password: String!\n  ) {\n    signup(name: $name, email: $email, password: $password) {\n      email\n      name\n      id\n    }\n  }\n`;\n\nconst Signup = () => {\n  const [inputs, setInputs] = useState({\n    name: '',\n    email: '',\n    password: ''\n  });\n  const [signup, { error, loading }] = useMutation(SIGNUP_MUTATION, {\n    variables: inputs,\n    refetchQueries: [{ query: CURRENT_USER_QUERY }]\n  });\n\n  const handleFormField = ({ target }) => {\n    setInputs({\n      ...inputs,\n      [target.name]: target.value\n    });\n  };\n  return (\n    <Form\n      method=\"post\"\n      onSubmit={async e => {\n        e.preventDefault();\n        const res = await signup();\n        console.log(res);\n        setInputs({\n          ...inputs,\n          name: '',\n          email: '',\n          password: ''\n        });\n      }}\n    >\n      <fieldset disabled={loading} aria-busy={loading}>\n        <h2>Sign Up for An Account</h2>\n        <Error error={error} />\n        <label htmlFor=\"email\">\n          Email\n          <input\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"Email\"\n            value={inputs.email}\n            onChange={handleFormField}\n          />\n        </label>\n        <label htmlFor=\"name\">\n          Name\n          <input\n            type=\"text\"\n            name=\"name\"\n            placeholder=\"Name\"\n            value={inputs.name}\n            onChange={handleFormField}\n          />\n        </label>\n        <label htmlFor=\"password\">\n          Password\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={inputs.password}\n            onChange={handleFormField}\n          />\n        </label>\n        <button type=\"submit\">Sign Up!</button>\n      </fieldset>\n    </Form>\n  );\n};\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}