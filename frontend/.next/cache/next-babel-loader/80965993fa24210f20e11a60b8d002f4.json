{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/abdulaliyev/tut/nextjs-graphql/online-store/frontend/components/UpdateItem.js\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation UPDATE_ITEM_MUTATION(\\n    $title: String!\\n    $description: String!\\n    $price: Int!\\n    $image: String\\n    $largeImage: String\\n  ) {\\n    createItem(\\n      title: $title\\n      description: $description\\n      price: $price\\n      image: $image\\n      largeImage: $largeImage\\n    ) {\\n      id\\n      title\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query SINGLE_ITEM_QUERY($id: ID!) {\\n    item(where: { id: $id }) {\\n      id\\n      title\\n      description\\n      price\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport { Mutation, Query } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport Router from 'next/router';\nimport Form from './styles/Form';\nimport formatMoney from '../lib/formatMoney';\nimport Error from './ErrorMessage';\nexport var SINGLE_ITEM_QUERY = gql(_templateObject());\nexport var UPDATE_ITEM_MUTATION = gql(_templateObject2());\n\nvar UpdateItem = function UpdateItem(props) {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      title = _useState2[0],\n      setTitle = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      description = _useState4[0],\n      setDescription = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      image = _useState6[0],\n      setImage = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      largeImage = _useState8[0],\n      setLargeImage = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      price = _useState10[0],\n      setPrice = _useState10[1];\n\n  return React.createElement(Query, {\n    query: SINGLE_ITEM_QUERY,\n    variables: {\n      id: props.id\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, function (_ref) {\n    var data = _ref.data,\n        loading = _ref.loading;\n    if (loading) React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"Loading...\");\n    return React.createElement(Mutation, {\n      mutation: UPDATE_ITEM_MUTATION,\n      variables: {\n        title: title,\n        description: description,\n        image: image,\n        largeImage: largeImage,\n        price: price\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, function (createItem, _ref2) {\n      var loading = _ref2.loading,\n          error = _ref2.error;\n      return React.createElement(Form, {\n        onSubmit:\n        /*#__PURE__*/\n        function () {\n          var _ref3 = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee(e) {\n            var res;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    // Stop the form from submitting\n                    e.preventDefault(); // Call the mutation\n\n                    _context.next = 3;\n                    return createItem();\n\n                  case 3:\n                    res = _context.sent;\n                    // Change them to the single item page\n                    console.log('res = ', res);\n                    Router.push({\n                      pathname: '/item',\n                      query: {\n                        id: res.data.createItem.id\n                      }\n                    });\n\n                  case 6:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function (_x) {\n            return _ref3.apply(this, arguments);\n          };\n        }(),\n        method: \"post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(Error, {\n        error: error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"fieldset\", {\n        disabled: loading,\n        \"aria-busy\": loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"Title\", React.createElement(\"input\", {\n        type: \"text\",\n        id: \"title\",\n        name: \"title\",\n        placeholder: \"Title\",\n        required: true,\n        defaultValue: data.item.title,\n        onChange: function onChange(e) {\n          return setTitle(e.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        htmlFor: \"price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Price\", React.createElement(\"input\", {\n        type: \"number\",\n        id: \"price\",\n        name: \"price\",\n        placeholder: \"Price\",\n        required: true,\n        value: price,\n        onChange: function onChange(e) {\n          return setPrice(e.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        htmlFor: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Description\", React.createElement(\"textarea\", {\n        id: \"description\",\n        name: \"description\",\n        placeholder: \"Enter a Description\",\n        required: true,\n        value: description,\n        onChange: function onChange(e) {\n          return setDescription(e.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Submit\")));\n    });\n  });\n};\n\nexport default UpdateItem;","map":{"version":3,"sources":["/Users/abdulaliyev/tut/nextjs-graphql/online-store/frontend/components/UpdateItem.js"],"names":["React","useState","Mutation","Query","gql","Router","Form","formatMoney","Error","SINGLE_ITEM_QUERY","UPDATE_ITEM_MUTATION","UpdateItem","props","title","setTitle","description","setDescription","image","setImage","largeImage","setLargeImage","price","setPrice","id","data","loading","createItem","error","e","preventDefault","res","console","log","push","pathname","query","item","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Mutation, Query } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport Router from 'next/router';\nimport Form from './styles/Form';\nimport formatMoney from '../lib/formatMoney';\nimport Error from './ErrorMessage';\n\nexport const SINGLE_ITEM_QUERY = gql`\n  query SINGLE_ITEM_QUERY($id: ID!) {\n    item(where: { id: $id }) {\n      id\n      title\n      description\n      price\n    }\n  }\n`;\n\nexport const UPDATE_ITEM_MUTATION = gql`\n  mutation UPDATE_ITEM_MUTATION(\n    $title: String!\n    $description: String!\n    $price: Int!\n    $image: String\n    $largeImage: String\n  ) {\n    createItem(\n      title: $title\n      description: $description\n      price: $price\n      image: $image\n      largeImage: $largeImage\n    ) {\n      id\n      title\n    }\n  }\n`;\n\nconst UpdateItem = props => {\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [image, setImage] = useState('');\n  const [largeImage, setLargeImage] = useState('');\n  const [price, setPrice] = useState(0);\n\n  return (\n    <Query query={SINGLE_ITEM_QUERY} variables={{ id: props.id }}>\n      {({ data, loading }) => {\n        if (loading) <p>Loading...</p>;\n        return (\n          <Mutation\n            mutation={UPDATE_ITEM_MUTATION}\n            variables={{\n              title,\n              description,\n              image,\n              largeImage,\n              price\n            }}\n          >\n            {(createItem, { loading, error }) => (\n              <Form\n                onSubmit={async e => {\n                  // Stop the form from submitting\n                  e.preventDefault();\n                  // Call the mutation\n                  const res = await createItem();\n                  // Change them to the single item page\n                  console.log('res = ', res);\n                  Router.push({\n                    pathname: '/item',\n                    query: { id: res.data.createItem.id }\n                  });\n                }}\n                method=\"post\"\n              >\n                <Error error={error} />\n                <fieldset disabled={loading} aria-busy={loading}>\n                  <label htmlFor=\"title\">\n                    Title\n                    <input\n                      type=\"text\"\n                      id=\"title\"\n                      name=\"title\"\n                      placeholder=\"Title\"\n                      required\n                      defaultValue={data.item.title}\n                      onChange={e => setTitle(e.target.value)}\n                    />\n                  </label>\n                  <label htmlFor=\"price\">\n                    Price\n                    <input\n                      type=\"number\"\n                      id=\"price\"\n                      name=\"price\"\n                      placeholder=\"Price\"\n                      required\n                      value={price}\n                      onChange={e => setPrice(e.target.value)}\n                    />\n                  </label>\n                  <label htmlFor=\"title\">\n                    Description\n                    <textarea\n                      id=\"description\"\n                      name=\"description\"\n                      placeholder=\"Enter a Description\"\n                      required\n                      value={description}\n                      onChange={e => setDescription(e.target.value)}\n                    />\n                  </label>\n                  <button type=\"submit\">Submit</button>\n                </fieldset>\n              </Form>\n            )}\n          </Mutation>\n        );\n      }}\n    </Query>\n  );\n};\n\nexport default UpdateItem;\n"]},"metadata":{},"sourceType":"module"}