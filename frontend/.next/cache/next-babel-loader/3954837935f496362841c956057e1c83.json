{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/abdulaliyev/tut/nextjs-graphql/online-store/frontend/components/RequestReset.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation REQUEST_RESET_MUTATION($email: String!) {\\n    requestReset(email: $email) {\\n      message\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport { Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport Form from './styles/Form';\nimport Error from './ErrorMessage';\nvar REQUEST_RESET_MUTATION = gql(_templateObject());\n\nvar RequestReset = function RequestReset() {\n  var _useState = useState({\n    email: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      inputs = _useState2[0],\n      setInputs = _useState2[1];\n\n  var handleFormField = function handleFormField(_ref) {\n    var target = _ref.target;\n    setInputs(_objectSpread({}, inputs, _defineProperty({}, target.name, target.value)));\n  };\n\n  return React.createElement(Mutation, {\n    mutation: REQUEST_RESET_MUTATION,\n    variables: inputs,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, function (reset, _ref2) {\n    var error = _ref2.error,\n        loading = _ref2.loading,\n        called = _ref2.called;\n    return React.createElement(Form, {\n      method: \"post\",\n      onSubmit:\n      /*#__PURE__*/\n      function () {\n        var _ref3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(e) {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  e.preventDefault();\n                  _context.next = 3;\n                  return reset();\n\n                case 3:\n                  _this.setState({\n                    email: ''\n                  });\n\n                case 4:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref3.apply(this, arguments);\n        };\n      }(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34\n      },\n      __self: this\n    }, React.createElement(\"fieldset\", {\n      disabled: loading,\n      \"aria-busy\": loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, \"Request a password reset\"), React.createElement(Error, {\n      error: error,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }), !error && !loading && called && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, \"Success! Check your email for a reset link!\"), React.createElement(\"label\", {\n      htmlFor: \"email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, \"Email\", React.createElement(\"input\", {\n      type: \"email\",\n      name: \"email\",\n      placeholder: \"Email\",\n      value: inputs.email,\n      onChange: handleFormField,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, \"Request Reset!\")));\n  });\n};\n\nexport default RequestReset;","map":{"version":3,"sources":["/Users/abdulaliyev/tut/nextjs-graphql/online-store/frontend/components/RequestReset.js"],"names":["React","useState","Mutation","gql","Form","Error","REQUEST_RESET_MUTATION","RequestReset","email","inputs","setInputs","handleFormField","target","name","value","reset","error","loading","called","e","preventDefault","setState"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AAEA,IAAMC,sBAAsB,GAAGH,GAAH,mBAA5B;;AAQA,IAAMI,YAAY,GAAG,SAAfA,YAAe,GAAM;AAAA,kBACGN,QAAQ,CAAC;AACnCO,IAAAA,KAAK,EAAE;AAD4B,GAAD,CADX;AAAA;AAAA,MAClBC,MADkB;AAAA,MACVC,SADU;;AAKzB,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,OAAgB;AAAA,QAAbC,MAAa,QAAbA,MAAa;AACtCF,IAAAA,SAAS,mBACJD,MADI,sBAENG,MAAM,CAACC,IAFD,EAEQD,MAAM,CAACE,KAFf,GAAT;AAID,GALD;;AAOA,SACE,oBAAC,QAAD;AACE,IAAA,QAAQ,EAAER,sBADZ;AAEE,IAAA,SAAS,EAAEG,MAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIG,UAACM,KAAD,SAAuC;AAAA,QAA7BC,KAA6B,SAA7BA,KAA6B;AAAA,QAAtBC,OAAsB,SAAtBA,OAAsB;AAAA,QAAbC,MAAa,SAAbA,MAAa;AACtC,WACE,oBAAC,IAAD;AACE,MAAA,MAAM,EAAC,MADT;AAEE,MAAA,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,iCAAE,iBAAMC,CAAN;AAAA;AAAA;AAAA;AAAA;AACRA,kBAAAA,CAAC,CAACC,cAAF;AADQ;AAAA,yBAEFL,KAAK,EAFH;;AAAA;AAGR,kBAAA,KAAI,CAACM,QAAL,CAAc;AAAEb,oBAAAA,KAAK,EAAE;AAAT,mBAAd;;AAHQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAF;;AAAA;AAAA;AAAA;AAAA,SAFV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQE;AAAU,MAAA,QAAQ,EAAES,OAApB;AAA6B,mBAAWA,OAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,EAEE,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAED,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGG,CAACA,KAAD,IAAU,CAACC,OAAX,IAAsBC,MAAtB,IAAgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDAHnC,EAIE;AAAO,MAAA,OAAO,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAEE;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,IAAI,EAAC,OAFP;AAGE,MAAA,WAAW,EAAC,OAHd;AAIE,MAAA,KAAK,EAAET,MAAM,CAACD,KAJhB;AAKE,MAAA,QAAQ,EAAEG,eALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAJF,EAcE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAdF,CARF,CADF;AA2BD,GAhCH,CADF;AAoCD,CAhDD;;AAkDA,eAAeJ,YAAf","sourcesContent":["import React, { useState } from 'react';\nimport { Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport Form from './styles/Form';\nimport Error from './ErrorMessage';\n\nconst REQUEST_RESET_MUTATION = gql`\n  mutation REQUEST_RESET_MUTATION($email: String!) {\n    requestReset(email: $email) {\n      message\n    }\n  }\n`;\n\nconst RequestReset = () => {\n  const [inputs, setInputs] = useState({\n    email: '',\n  });\n\n  const handleFormField = ({ target }) => {\n    setInputs({\n      ...inputs,\n      [target.name]: target.value\n    });\n  };\n\n  return (\n    <Mutation\n      mutation={REQUEST_RESET_MUTATION}\n      variables={inputs}\n    >\n      {(reset, { error, loading, called }) => {\n        return (\n          <Form\n            method=\"post\"\n            onSubmit={async e => {\n              e.preventDefault();\n              await reset();\n              this.setState({ email: '' });\n            }}\n          >\n            <fieldset disabled={loading} aria-busy={loading}>\n              <h2>Request a password reset</h2>\n              <Error error={error} />\n              {!error && !loading && called && <p>Success! Check your email for a reset link!</p>}\n              <label htmlFor=\"email\">\n                Email\n                <input\n                  type=\"email\"\n                  name=\"email\"\n                  placeholder=\"Email\"\n                  value={inputs.email}\n                  onChange={handleFormField}\n                />\n              </label>\n              <button type=\"submit\">Request Reset!</button>\n            </fieldset>\n          </Form>\n        );\n      }}\n    </Mutation>\n  );\n};\n\nexport default RequestReset;\n"]},"metadata":{},"sourceType":"module"}