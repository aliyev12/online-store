{"ast":null,"code":"import React from 'react';\nimport { Query, Mutation } from 'react-apollo';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport { gql } from 'apollo-boost';\nimport handleError from '../lib/handleError';\nimport CartStyles from './styles/CartStyles';\nimport Supreme from './styles/Supreme';\nimport CloseButton from './styles/CloseButton';\nimport SickButton from './styles/SickButton';\nimport User from './User';\nimport useUser from '../hooks/useUser';\nimport CartItem from './CartItem';\nimport calcTotalPrice from '../lib/calcTotalPrice';\nimport formatMoney from '../lib/formatMoney';\nimport TakeMyMoney from './TakeMyMoney';\nexport const LOCAL_STATE_QUERY = gql`\n  query {\n    cartOpen @client\n  }\n`;\nexport const TOGGLE_CART_MUTATION = gql`\n  mutation {\n    toggleCart @client\n  }\n`;\n\nconst Cart = () => {\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(LOCAL_STATE_QUERY);\n  const [toggleCart] = useMutation(TOGGLE_CART_MUTATION);\n  const user = useUser();\n\n  if (user.data && !user.data.me) {\n    return null;\n  } else {\n    return React.createElement(CartStyles, {\n      open: data.cartOpen\n    }, loading && React.createElement(\"p\", null, \"Loading...\"), error && handleError(error), !loading && !error && React.createElement(React.Fragment, null, React.createElement(\"header\", null, React.createElement(CloseButton, {\n      onClick: toggleCart,\n      title: \"close\"\n    }, \"\\xD7\"), React.createElement(Supreme, null)), React.createElement(\"ul\", null, user.data && user.data.me.cart.map(cartItem => React.createElement(CartItem, {\n      key: cartItem.id,\n      cartItem: cartItem\n    }))), React.createElement(\"footer\", null, user.data && user.data.me.cart.length && React.createElement(\"div\", null, React.createElement(\"p\", null, formatMoney(calcTotalPrice(user.data.me.cart))), React.createElement(TakeMyMoney, null, React.createElement(SickButton, null, \"Checkout\"))))));\n  }\n};\n\nexport default Cart;","map":null,"metadata":{},"sourceType":"module"}